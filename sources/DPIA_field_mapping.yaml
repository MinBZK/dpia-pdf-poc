# Toevoegen aan het einde van je bestaande DPIA YAML-bestand
# ============= MAPPING TYPE DEFINITIES =============
#
# copy: Direct kopiëren van de waarde
# reference: Refereren aan de waarde (zonder te kopiëren)
# include: De waarde moet worden opgenomen in een grotere set/lijst
# copy_if_matches: Conditioneel kopiëren afhankelijk van andere velden
# derive: Afleiden van een nieuwe waarde op basis van bronwaarde(n)
# enable: Als dit veld deze conditie heeft, wordt de urn bewerkbaar
---
# DPIA URN Relaties
schema_version: 1.0.0
name: DPIA URN Relationele Mapping
description: Gedetailleerde mapping van URN-relaties in het DPIA-model
base_urn: urn:nl:dpia:3.0
version: 3.0
urn_relations:
  # Vaststelling naar Ondertekening - directe 1:1 relaties
  - source_urn: urn:nl:dpia:0.0:1.1  # Organisatie verwerkingsverantwoordelijke
    relations:
      - target_urn: urn:nl:dpia:0.0:3.1  # Organisatie ondertekening
        type: copy
        description: Kopieer organisatie verwerkingsverantwoordelijke naar ondertekening
  
  - source_urn: urn:nl:dpia:0.0:1.2  # Naam verwerkingsverantwoordelijke
    relations:
      - target_urn: urn:nl:dpia:0.0:3.2  # Naam ondertekening
        type: copy
        description: Kopieer naam verwerkingsverantwoordelijke naar ondertekening
  
  - source_urn: urn:nl:dpia:0.0:1.3  # Functie verwerkingsverantwoordelijke
    relations:
      - target_urn: urn:nl:dpia:0.0:3.3  # Functie ondertekening
        type: copy
        description: Kopieer functie verwerkingsverantwoordelijke naar ondertekening
  
  - source_urn: urn:nl:dpia:0.0:1.4  # Datum ondertekening verwerkingsverantwoordelijke
    relations:
      - target_urn: urn:nl:dpia:0.0:3.4  # Datum ondertekening
        type: copy
        description: Kopieer datum ondertekening verwerkingsverantwoordelijke naar ondertekening

  # Persoonsgegevens naar Bijzondere persoonsgegevens - rechtstreekse doorkoppeling 
  - source_urn: urn:nl:dpia:2.0:1.1  # Categorie betrokkene
    relations:
      - target_urn: urn:nl:dpia:12.0:1.2  # Categorie betrokkene bij bijzondere gegevens
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "bijzonder")
        description: Kopieer categorie betrokkene naar bijzondere persoonsgegevens sectie
      
      - target_urn: urn:nl:dpia:12.0:2.2  # Categorie betrokkene bij strafrechtelijke gegevens
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "strafrechtelijk")
        description: Kopieer categorie betrokkene naar strafrechtelijke gegevens sectie
      
      - target_urn: urn:nl:dpia:12.0:3.2  # Categorie betrokkene bij identificatienummers
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "identificatie-nummer")
        description: Kopieer categorie betrokkene naar nationale identificatienummers sectie

  - source_urn: urn:nl:dpia:2.0:1.3  # Persoonsgegeven
    relations:
      - target_urn: urn:nl:dpia:12.0:1.2  # Categorie persoonsgegeven bij bijzondere gegevens
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "bijzonder")
        description: Kopieer persoonsgegeven naar bijzondere persoonsgegevens sectie
      
      - target_urn: urn:nl:dpia:12.0:2.2  # Categorie persoonsgegeven bij strafrechtelijke gegevens
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "strafrechtelijk")
        description: Kopieer persoonsgegeven naar strafrechtelijke gegevens sectie
      
      - target_urn: urn:nl:dpia:12.0:3.2  # Categorie persoonsgegeven bij identificatienummers
        type: copy_if_matches
        condition: (urn:nl:dpia:2.0:1.4 == "identificatie-nummer")
        description: Kopieer persoonsgegeven naar nationale identificatienummers sectie

  # Persoonsgegevens naar Gegevensverwerkingen - directe 1:1 relaties
  - source_urn: urn:nl:dpia:2.0:1.1  # Categorie betrokkene
    relations:
      - target_urn: urn:nl:dpia:3.0:1.2  # Categorie betrokkene & persoonsgegevens
        type: include
        description: Neem categorie betrokkene op in gegevensverwerkingen

  - source_urn: urn:nl:dpia:2.0:1.3  # Persoonsgegeven
    relations:
      - target_urn: urn:nl:dpia:3.0:1.2  # Categorie betrokkene & persoonsgegevens
        type: include
        description: Neem persoonsgegeven op in gegevensverwerkingen

  # Gegevensverwerkingen naar andere secties - exacte kopieën
  - source_urn: urn:nl:dpia:3.0:1.1  # Gegevensverwerking
    relations:
      - target_urn: urn:nl:dpia:5.0:1.1  # Gegevensverwerking bij verwerkingsdoeleinden
        type: copy
        description: Kopieer gegevensverwerking naar verwerkingsdoeleinden
        
      - target_urn: urn:nl:dpia:8.0:1.1  # Gegevensverwerking bij verwerkingslocaties
        type: copy
        description: Kopieer gegevensverwerking naar verwerkingslocaties
        
      - target_urn: urn:nl:dpia:9.0:1.1  # Gegevensverwerking bij juridisch kader
        type: copy
        description: Kopieer gegevensverwerking naar juridisch kader
        
      - target_urn: urn:nl:dpia:10.0:1.1  # Gegevensverwerking bij bewaartermijnen
        type: copy
        description: Kopieer gegevensverwerking naar bewaartermijnen
        
      - target_urn: urn:nl:dpia:11.0:1.1  # Gegevensverwerking bij rechtsgrond
        type: copy
        description: Kopieer gegevensverwerking naar rechtsgrond
        
      - target_urn: urn:nl:dpia:13.0:1.1  # Gegevensverwerking bij doelbinding
        type: copy
        description: Kopieer gegevensverwerking naar doelbinding

  # Categorieën betrokkenen & persoonsgegevens - directe kopieën
  - source_urn: urn:nl:dpia:3.0:1.2  # Categorie betrokkene & persoonsgegevens
    relations:
      - target_urn: urn:nl:dpia:6.0:1.4  # Categorie betrokkene & persoonsgegevens bij betrokken partijen
        type: copy
        description: Kopieer categorieën betrokkene & persoonsgegevens naar betrokken partijen
        
      - target_urn: urn:nl:dpia:10.0:1.3  # Categorie betrokkene & persoonsgegevens bij bewaartermijnen
        type: copy
        description: Kopieer categorieën betrokkene & persoonsgegevens naar bewaartermijnen
        
      - target_urn: urn:nl:dpia:13.0:1.2  # Categorie betrokkene & persoonsgegevens bij doelbinding
        type: copy
        description: Kopieer categorieën betrokkene & persoonsgegevens naar doelbinding

  # Verwerkingsdoeleinden relaties - directe kopieën
  - source_urn: urn:nl:dpia:5.0:1.2  # Verwerkingsdoeleinde
    relations:
      - target_urn: urn:nl:dpia:10.0:1.2  # Verwerkingsdoeleinde bij bewaartermijnen
        type: copy
        description: Kopieer verwerkingsdoeleinde naar bewaartermijnen
        
      - target_urn: urn:nl:dpia:13.0:1.3  # Doeleinde bij doelbinding
        type: copy
        description: Kopieer verwerkingsdoeleinde naar doelbinding

  # Betrokken partijen en belangen - directe kopie
  - source_urn: urn:nl:dpia:6.0:1.1  # Naam partij
    relations:
      - target_urn: urn:nl:dpia:7.0:1.1  # Betrokken partij bij belangen
        type: copy
        description: Kopieer naam betrokken partij naar belangen sectie

  # Oorspronkelijk verwerkingsdoeleinde naar doelbinding - directe kopie
  - source_urn: urn:nl:dpia:2.0:1.6  # Oorspronkelijk verwerkingsdoeleinde
    relations:
      - target_urn: urn:nl:dpia:13.0:1.4  # Oorspronkelijk doeleinde bij doelbinding
        type: copy
        description: Kopieer oorspronkelijk verwerkingsdoeleinde naar doelbinding

  # Risico's naar maatregelen - directe 1:1 kopieën
  - source_urn: urn:nl:dpia:16.0:1.1  # Beschrijving risico
    relations:
      - target_urn: urn:nl:dpia:17.0:1.1  # Risico bij maatregelen
        type: copy
        description: Kopieer risicobeschrijving naar maatregelen
  
  - source_urn: urn:nl:dpia:16.0:1.2  # Oorsprong risico
    relations:
      - target_urn: urn:nl:dpia:17.0:1.2  # Oorsprong bij maatregelen
        type: copy
        description: Kopieer oorsprong risico naar maatregelen

  # Risico-inschatting naar restrisico - met logica
  - source_urn: urn:nl:dpia:16.0:1.5  # Risico-inschatting
    relations:
      - target_urn: urn:nl:dpia:17.0:1.4  # Resterend risico
        type: derive
        formula: "IF(urn:nl:dpia:17.0:1.3 == 'sterk') THEN downgrade(urn:nl:dpia:16.0:1.5) ELSE urn:nl:dpia:16.0:1.5"
        description: Bepaal restrisico op basis van risico-inschatting en maatregelen